BYTE_ENABLED = true

# Include path for the caml headers <caml/mlvalues.h> and friends.  
# You might need something this if you have installed OCaml manually or via
# something like macports:
#INCLUDES += /opt/local/lib/ocaml

OCAMLFLAGS += -dtypes
# OCAMLCFLAGS   +=
OCAMLOPTFLAGS += -inline 10 -S
# OCAML_LINK_FLAGS +=
# OCAML_BYTE_LINK_FLAGS +=
# OCAML_NATIVE_LINK_FLAGS +=

StaticCLibrary(ometastore_stub, ometastore_stub)

PROGRAM = ometastore
OCAML_CLIBS += ometastore_stub
OCAML_OTHER_LIBS += unix str

OCamlProgram(ometastore, folddir util ometastore)
OCamlProgram(find-git-repos, folddir util find-git-repos)
OCamlProgram(find-git-files, folddir util find-git-files)

.DEFAULT: ometastore find-git-files find-git-repos

.PHONY: clean

clean:
	rm -f $(filter-proper-targets $(ls R, .)) *.s *.annot
